var S=Object.defineProperty;var N=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var m=(e,t,n)=>(N(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class z{constructor(){m(this,"contexts");this.contexts=[]}currentContext(){return this.contexts[this.contexts.length-1]}addContext(t){this.contexts.push(t)}popContext(){return this.contexts.pop()}getContext(){return this.contexts}}const C=new z,y=()=>C.currentContext(),D=e=>{const t=y();t&&t.own(e)};class G{constructor(){m(this,"owned");m(this,"disposeEvents");this.owned=new Set,this.disposeEvents=[]}own(t){this.owned.add(t)}ownMany(t){t.forEach(n=>{this.owned.add(n)})}dispose(){this.runDisposeEvents(),this.owned.clear()}runDisposeEvents(){this.disposeEvents.forEach(t=>t()),this.disposeEvents=[]}onDispose(t){this.disposeEvents.push(t);const n=this.disposeEvents.length-1;return r=>{this.disposeEvents.length>n&&(this.disposeEvents[n]=r)}}addEffect(t){this.owned.forEach(n=>n.addEffect(t))}removeEffect(t){this.owned.forEach(n=>n.removeEffect(t))}getOwned(){return[...this.owned]}}class I{constructor(t){m(this,"effects");m(this,"value");this.value=t,this.effects=[]}_read(){return this.value}read(){return D(this),this._read()}_write(t){this.value=t}write(t){this._write(t),this.effects.forEach(n=>n())}dispose(){this.effects=[]}addEffect(t){this.effects.push(t)}removeEffect(t){this.effects=this.effects.filter(n=>n!==t)}}const _=(e,t=!0)=>{const n=new G;return C.addContext(n),e(),C.popContext(),y()&&t&&w(()=>P(n)),()=>P(n)},P=e=>{e.dispose()},w=e=>{const t=y();if(t)return t.onDispose(e)},V=e=>{const t=new I(e);return[()=>t.read(),n=>t.write(typeof n=="function"?n(t._read()):n)]},O=e=>{const t=_(()=>{e();const n=y();n&&(n.addEffect(e),w(()=>{n.removeEffect(e)}))});w(t)},W=()=>{let e=null,t;return[()=>e==null?void 0:e(),n=>{t?t(n):t=w(n),e=n}]},b=(e,t)=>{const n=$(t);Array.isArray(n)?n.forEach(r=>e.appendChild(r)):e.appendChild(n)},H=(e,t=document.body)=>{_(()=>{b(t,e)})},$=e=>e instanceof Node?e:Array.isArray(e)?e.map(t=>$(t)).flat():new Text(e+""),X=(e,t)=>{const n=$(t);if(Array.isArray(n)){let r=e;n.forEach(s=>{r.after(s),r=s})}else e.after(n)},g=(e,t)=>{const n=$(t);if(Array.isArray(n)){let r=e;n.reverse().forEach(s=>{r.before(s),r=s})}else e.before(n)},q=(e,t,n,r)=>{if(Array.isArray(e))if(Array.isArray(t)){if(e.length===0){r?g(r,t):b(n,t);return}for(;e.length>t.length;)e[e.length-1].remove(),e.pop();let s=0;for(;s<e.length;s++)e[s].replaceWith(t[s]);for(;s<t.length;)t[s-1].after(t[s]),s++}else{if(e.length===0){r?g(r,t):b(n,t);return}for(;e.length>1;)e[e.length-1].remove(),e.pop();e[0].replaceWith(t)}else if(Array.isArray(t)){if(t.length===0){e.remove();return}const s=t.shift();e.replaceWith(s),X(s,t)}else e.replaceWith(t)},B=e=>{const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const s=n[`${t}Data`];s!==void 0?r(s,e):r(e)}n=n.parentNode}},T="_$DX_DELEGATE";let A=[];const x=(e,t)=>{const n=A.length;let r;const s=_(()=>{r=e(t)});for(;A.length>n;){const i=A.pop();i==null||i()}return w(s),r},p=(e,t,n)=>{const s=(()=>{const i=document.createElement("template");return i.innerHTML=e,n?i.content.firstChild.firstChild:i.content.firstChild})();return()=>s==null?void 0:s.cloneNode(!0)},d=(e,t,n=null,r)=>{if(r&&console.log("HAS INITIAL",{parent:e,accessor:t,marker:n,initial:r}),typeof t=="function"){let s=null;const[i,o]=W();let l=null,h=!1;O(()=>{if(!l){const a=y();if(!a)return;l=a}i();let u=[];const v=_(()=>{let a=t();if(!h){const E=y();E&&(u=E.getOwned())}if(a===!1||a===null||a===void 0)if(s!==null){const E=new Text;s.replaceWith(E),s=E;return}else a="";const f=$(a);s===null?n!==null?g(n,f):b(e,f):q(s,f,e,n),s=f},!1);h||(l.ownMany(u),h=!0),o(v)})}else n?g(n,t):b(e,t)},F=(e,t)=>{t.split(" ").forEach(r=>e.classList.add(r))},K=(e,t=document)=>{const n=t[T]||(t[T]=new Set);for(let r=0;r<e.length;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,B))}},Y=e=>{O(()=>e({}))},j=[[0,0,0],[0,0,0],[0,0,0]],c=[[[0,0,0],[0,1,0],[0,0,0]],[[0,1,0],[1,1,1],[0,0,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[0,1,1],[0,0,0]],[[0,1,0],[1,1,0],[0,0,0]],[[0,0,0],[1,1,0],[0,1,0]],[[0,0,0],[0,1,1],[0,1,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]],[[0,1,0],[1,1,1],[0,1,0]]],M=c.length,J=()=>Math.floor(Math.random()*M),Q=e=>e.map(t=>t.map(n=>n)),R=e=>{const t=[];for(let n=0;n<e.length;n++)for(let r=0;r<e.length;r++)e[n][r]>-1||(n-1>=0&&e[n-1][r]>-1&&t.push([n,r]),n+1<e.length&&e[n+1][r]>-1&&t.push([n,r]),r-1>=0&&e[n][r-1]>-1&&t.push([n,r]),r+1<e.length&&e[n][r+1]>-1&&t.push([n,r]));return t},U=(e,t,n)=>{let r=Array(M).fill(0).map((s,i)=>i);if(t>0){const s=e[t-1][n],i=c[s];i&&(r=r.filter(o=>{const l=c[o];return i[2][1]===0&&l[0][1]===0||i[2][1]===1&&l[0][1]===1}))}if(n>0){const s=e[t][n-1],i=c[s];i&&(r=r.filter(o=>{const l=c[o];return i[1][2]===0&&l[1][0]===0||i[1][2]===1&&l[1][0]===1}))}if(t+1<e.length){const s=e[t+1][n],i=c[s];i&&(r=r.filter(o=>{const l=c[o];return i[0][1]===0&&l[2][1]===0||i[0][1]===1&&l[2][1]===1}))}if(n+1<e.length){const s=e[t][n+1],i=c[s];i&&(r=r.filter(o=>{const l=c[o];return i[1][0]===0&&l[1][2]===0||i[1][0]===1&&l[1][2]===1}))}return r},Z=e=>{const t=Math.floor(Math.random()*e.length),n=Math.floor(Math.random()*e.length);e[t][n]=J();const r=e.length*e.length;for(let s=0;s<r;s++){const i=R(e);let o=null;if(i.forEach(([u,v])=>{const a=U(e,u,v),f={row:u,col:v,possibilities:a};(o===null||o.possibilities.length>f.possibilities.length&&f.possibilities.length>0)&&(o=f)}),o===null)continue;const l=o.possibilities,h=l[Math.floor(Math.random()*l.length)];e[o.row][o.col]=h}return e};var k=p("<div>Inalid tile: "),ee=p("<div class=tile>"),te=p("<div class=row>"),ne=p("<div>");const L=e=>{if(e.variant<-1||e.variant>=c.length)return(()=>{var n=k();return n.firstChild,d(n,()=>e.variant,null),n})();const t=e.variant===-1?j:c[e.variant];return(()=>{var n=ee();return d(n,()=>t.map(r=>(()=>{var s=te();return d(s,()=>r.map(i=>(()=>{var o=ne();return F(o,`box ${i===1?"active":"blank"}`),o})())),s})())),Y(r=>{var s=e.size===void 0?"100%":`${e.size}px`,i=e.size===void 0?"100%":`${e.size}px`,o=e.border?"1px solid black":"none";return s!==r.e&&((r.e=s)!=null?n.style.setProperty("width",s):n.style.removeProperty("width")),i!==r.t&&((r.t=i)!=null?n.style.setProperty("height",i):n.style.removeProperty("height")),o!==r.a&&((r.a=o)!=null?n.style.setProperty("border",o):n.style.removeProperty("border")),r}),n})()};var se=p("<div class=grid-wrapper><button>Generate</button><div class=grid>"),re=p("<div class=grid-row>");const ie=e=>{const t=()=>Array(e.size).fill([]).map(()=>Array(e.size).fill(-1)),[n,r]=V(t()),s=()=>{r(Q(Z(t())))};return s(),(()=>{var i=se(),o=i.firstChild,l=o.nextSibling;return o.$$click=s,d(l,()=>n().map(h=>(()=>{var u=re();return d(u,()=>h.map(v=>x(L,{variant:v}))),u})())),i})()};K(["click"]);var oe=p("<div class=container><section class=tile-wrapper></section><section class=collapse-grid>");const le=()=>(()=>{var e=oe(),t=e.firstChild,n=t.nextSibling;return d(t,()=>Array(M).fill(null).map((r,s)=>x(L,{variant:s,size:60,border:!0}))),d(n,x(ie,{size:30})),e})();H(x(le,{}));
